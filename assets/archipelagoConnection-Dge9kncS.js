async function L(t,e,i){try{const n=await fetch(t);if(!n.ok)return;const s=await n.json();e(s),i?.()}catch(n){console.error(n)}}async function j(t,e,i){try{const n=await fetch(t);if(!n.ok)return;const s=await n.json();e(s),i?.()}catch(n){console.error(n)}}const N=[];async function le(t){await L(t,E)}function E(t){const e=[];Object.entries(t).forEach(([i,n])=>{const s=q(i,n);e.push(s),N.push(i)}),k(e.join(`
`))}function q(t,e){const i=[`@keyframes ${t} {`];for(const[n,s]of Object.entries(e)){const a=Object.entries(s).map(([o,u])=>`    ${o}: ${u};`).join(" ");i.push(`  ${n} { ${a} }`)}return i.push("}"),i.join(`
`)}function k(t){let e=document.querySelector("#dynamic-animation-styles");e||(e=document.createElement("style"),e.id="dynamic-animation-styles",document.head.appendChild(e)),e.textContent=t+`
`}function ue(){return N}function x(t,e){!t||!e||(t.style.animationName=e.reference,t.style.animationDuration=`${e.duration}ms`,t.style.animationTimingFunction=e.timing,t.style.animationIterationCount=e.iterations.toString(),t.offsetWidth)}function S(t){t&&(t.style.animationName="",t.style.animationDuration="",t.style.animationTimingFunction="",t.style.animationIterationCount="",t.offsetWidth)}var v=(t=>(t[t.LOW=0]="LOW",t[t.CRITICAL=1]="CRITICAL",t))(v||{});class O extends EventTarget{data={0:[],1:[]};locked=!1;push(e,i){this.data[i].push(e),this.dispatchEvent(new Event("element-pushed"))}pop(){return this.data[1].length>0?this.data[1].shift():this.locked?null:this.data[0].shift()}lock(){this.locked=!0}unlock(){this.locked=!1}isEmpty(){return Object.values(this.data).every(e=>e.length===0)}}class U{timeout;cancel(){clearTimeout(this.timeout)}}class fe{queue=new O;displayContainer;isAnimating=!1;currentAnimatingItem=null;constructor(e){this.displayContainer=e,this.queue.addEventListener("element-pushed",async()=>{await this.processQueue()})}push(e,i){const n=i?v.CRITICAL:v.LOW;this.queue.push(e,n)}async processQueue(){this.isAnimating||(this.isAnimating=!0,this.displayContainer.style.display="",await this.displayItem(),this.isAnimating=!1)}async displayItem(){for(;!this.queue.isEmpty();){const e=this.queue.pop();e&&(this.currentAnimatingItem=e,this.displayContainer.style.visibility="",await e.display(this.displayContainer),this.displayContainer.style.visibility="hidden")}}cancel(){this.currentAnimatingItem&&(this.currentAnimatingItem.cancel(),this.currentAnimatingItem=null,this.displayContainer.style.visibility="hidden",this.displayItem())}lockQueue(){this.queue.lock()}unlockQueue(){this.queue.unlock()}}const p=new Map,w=new Map;async function me(t){await j(t,z),console.log("MEDIA",p,w)}function z(t){b(p,t.images),b(w,t.audios)}function b(t,e){Object.entries(e).forEach(([i,n])=>{t.set(i,n)})}function de(){return Array.from(p.keys())}function ge(){return Array.from(w.keys())}function D(t){return w.get(t)}function F(t){return p.get(t)}const B="en";let R="en";function he(){R=new URL(window.location.href).searchParams.get("lang")||B,console.log("LANGUAGE",R)}function H(t,e,i){if(!i)return"";const n=i[R];return n?t?n.replace(/{{(\w+)}}/g,(a,o)=>{if(!(o in t))return console.error(`{{${o}}} is not defined in "${n}"`),"";const u=t[o]??"",g=e[o]?`color: ${e[o].color};`:"";return`<span id="${o}" style="${g}">${u}</span>`}):n:""}function C(t){if(t.length!==0)return t[Math.floor(Math.random()*t.length)]}class _ extends U{slot;config;variables;resolveDisplay;constructor(e,i,n){super(),this.slot=e,this.config=i,this.variables=n}cancel(){const e=document.querySelector(".alert-audio");e&&(e.pause(),e.currentTime=0,e.removeAttribute("src"));const i=document.querySelector(".alert-container");i&&S(i);const n=document.querySelector(".alert-image");n&&n.removeAttribute("src");const s=document.querySelector(".alert-text");s&&(s.innerHTML=""),this.resolveDisplay&&this.resolveDisplay()}async display(e){return console.log("DISPLAYING",this.slot,this.config),new Promise(i=>{this.resolveDisplay=i,this.setAudio(e),this.setText(e),this.setImage(e),this.setAnimation(e),this.timeout=setTimeout(()=>{S(e),this.resolveDisplay=void 0,i()},this.config.timeout)})}setText(e){const i=e.querySelector(".alert-text");if(i){const n=H(this.variables,this.config.style,this.config.translations);n!==null&&(i.innerHTML=n)}}setImage(e){const i=e.querySelector(".alert-image");if(this.config.imageReferences.length>0&&i){const n=C(this.config.imageReferences),s=F(n);s===""||s===void 0?i.removeAttribute("src"):i.src=s}}setAudio(e){const i=e.querySelector(".alert-audio");if(this.config.audioReferences.length>0&&i){const n=C(this.config.audioReferences),s=D(n);s===""||s===void 0?(i.pause(),i.removeAttribute("src")):(i.src=s,i.play())}}setAnimation(e){this.config.animation&&x(e,{...this.config.animation,duration:this.config.animation.duration||this.config.timeout})}}class ye extends _{constructor(e,i,n,s){super(n,s,{target:i,item:e})}}function I(t,e){if(!t||!e||t.length!==e.length)return!1;const i=[...t].sort(),n=[...e].sort();return i.every((s,a)=>s===n[a])}function A(t,e){let i=e;return t!==null&&(i=Number(t),isNaN(i)&&(i=e)),i}const d=new Map,m=new Map;async function pe(t){await L(t,Q,G),console.log("ALERTS",d,m)}function G(t){const e=t||new URL(window.location.href).searchParams;for(const[i,n]of d){const s=e.get(`${i}-timeout`),a=e.get(`${i}-a`)?.split(","),o=e.get(`${i}-i`)?.split(","),u=e.get(`${i}-anim`),g=e.get(`${i}-anim-duration`),f=e.get(`${i}-anim-iterations`),h=e.get(`${i}-anim-timing`),$=A(s,n.timeout),M=A(g,n.animation.duration),P=A(f,n.animation.iterations);m.set(i,{name:i,alertReference:void 0,timeout:$,translations:void 0,style:void 0,audioReferences:a,imageReferences:o,animation:{reference:u,duration:M,iterations:P,timing:h}})}}function we(t){const e=t||new URLSearchParams;for(const[i,n]of d){const s=m.get(i);if(!s)continue;const a=(g,f,h)=>{if(f!=null){if(typeof f=="object"){if(JSON.stringify(f)===JSON.stringify(h))return}else if(f===h)return;e.set(g,String(f))}};a(`${i}-timeout`,s.timeout,n.timeout),s?.audioReferences&&!I(s?.audioReferences,n.audioReferences)&&e.set(`${i}-a`,s.audioReferences.join(",")),s?.imageReferences&&!I(s?.imageReferences,n.imageReferences)&&e.set(`${i}-i`,s.imageReferences.join(","));const o=s.animation,u=n.animation;o&&(a(`${i}-anim`,o.reference,u.reference),a(`${i}-anim-duration`,o.duration,u.duration),a(`${i}-anim-iterations`,o.iterations,u.iterations),a(`${i}-anim-timing`,o.timing,u.timing))}return e}function Q(t){Object.entries(t).forEach(([e,i])=>{d.set(e,{name:e,alertReference:i["alert-reference"],timeout:i.timeout,translations:i.translations,style:i.style,audioReferences:i["audio-references"],imageReferences:i["image-references"],animation:i.animation}),m.set(e,{name:e,alertReference:void 0,timeout:void 0,translations:void 0,style:void 0,audioReferences:void 0,imageReferences:void 0,animation:{reference:void 0,duration:void 0,iterations:void 0,timing:void 0}})})}function Ae(t,e){const i=W(t);if(!i)return;const n={name:t,alertReference:void 0,timeout:e?.timeout??i.timeout,translations:void 0,style:void 0,audioReferences:e?.audioReferences??i.audioReferences,imageReferences:e?.imageReferences??i.imageReferences,animation:{reference:e?.animation?.reference??i.animation.reference,duration:e?.animation?.duration??i.animation.duration,iterations:e?.animation?.iterations??i.animation.iterations,timing:e?.animation?.timing??i.animation.timing}};m.set(t,n)}function W(t){const e=d.get(t),i=m.get(t);return!e&&!i?null:{name:t,alertReference:e.alertReference,timeout:i?.timeout??e.timeout,translations:e.translations,style:e.style,audioReferences:i?.audioReferences??e.audioReferences,imageReferences:i?.imageReferences??e.imageReferences,animation:{reference:i?.animation.reference??e.animation.reference,duration:i?.animation?.duration??e.animation.duration,iterations:i?.animation?.iterations??e.animation.iterations,timing:i?.animation?.timing??e.animation.timing}}}function ve(){return{configs:d,overrides:m}}function J(t,e){if(t==null)return!0;if(typeof t=="object"){if(JSON.stringify(t)===JSON.stringify(e))return!0}else if(t===e)return!0;return!1}function y(t,e,i,n){J(i,n)||t.set(e,String(i))}let r,c;const K={"system-ui":"System UI","-apple-system":"Apple System",BlinkMacSystemFont:"BlinkMac System Font",SegoeUI:"Segoe UI",Roboto:"Roboto",HelveticaNeue:"Helvetica Neue",Arial:"Arial",NotoSans:"Noto Sans",LiberationSans:"Liberation Sans",Georgia:"Georgia",TimesNewRoman:"Times New Roman",Times:"Times",PalatinoLinotype:"Palatino Linotype",BookAntiqua:"Book Antiqua",Consolas:"Consolas",Menlo:"Menlo",Monaco:"Monaco",CourierNew:"Courier New",LiberationMono:"Liberation Mono","sans-serif":"Sans-serif",serif:"Serif",monospace:"Monospace"},Y={normal:"Normal",bold:"Bold",italic:"Italic",bi:"Bold + Italic"},X={normal:"None",small:"Small",medium:"Medium",large:"Large"};function Re(){r={family:"Arial",size:"12",style:"normal",shadow:"normal"},c={family:void 0,size:void 0,style:void 0,shadow:void 0},Z()}function Z(t){const e=t||new URL(window.location.href).searchParams,i=e.get("font-family"),n=e.get("font-size"),s=e.get("font-style"),a=e.get("font-shadow");c={family:i??r.family,size:n??r.size,style:s??r.style,shadow:a??r.shadow},console.log("FONT",c)}function Se(t){const e=t||new URLSearchParams;return y(e,"font-family",c.family,r.family),y(e,"font-size",c.size,r.size),y(e,"font-style",c.style,r.style),y(e,"font-shadow",c.shadow,r.shadow),e}function be(t){const e=V();c={family:t.family??e.family,size:t.size??e.size,style:t.style??e.style,shadow:t.shadow??e.shadow}}function V(){return{family:c?.family??r.family,size:c?.size??r.size,style:c?.style??r.style,shadow:c?.shadow??r.shadow}}function Ce(){return K}function Ie(){return Y}function Le(){return X}var ee=Object.defineProperty,te=(t,e)=>{for(var i in e)ee(t,i,{get:e[i],enumerable:!0,configurable:!0,set:n=>e[i]=()=>n})},ie={};te(ie,{slotTypes:()=>ae,permissions:()=>oe,itemsHandlingFlags:()=>T,itemClassifications:()=>se,clientStatuses:()=>ne});var ne={disconnected:0,connected:5,ready:10,playing:20,goal:30},se={progression:1,useful:2,trap:4,none:0},T={minimal:0,others:1,own:2,starting:4,all:7},oe={disabled:0,enabled:1,goal:2,auto:6,autoEnabled:7},ae={spectator:0,player:1,group:2};function re(){const t=[];for(let e=0;e<36;e++)t.push(Math.floor(Math.random()*16));return t[14]=4,t[19]=t[19]&=-5,t[19]=t[19]|=8,t[8]=t[13]=t[18]=t[23]="-",t.map(e=>e.toString(16)).join("")}re(),T.all;let l;function Ne(){l={url:void 0,slots:void 0,password:void 0},ce()}function ce(t){const e=t||new URL(window.location.href).searchParams,i=e.get("archipelago-url"),n=e.get("archipelago-slots")?.split(",")||[],s=e.get("archipelago-password");l={url:i,slots:n,password:s}}function Te(t){const e=t||new URLSearchParams;if(!l)return e;e.set("archipelago-url",l.url),e.set("archipelago-slots",l.slots.join(",")),e.set("archipelago-password",l.password)}function $e(t){l={url:t?.url??l.url,slots:t?.slots??l.slots,password:t?.password??l.password}}function Me(){return l}export{_ as A,fe as D,ye as I,A as S,Re as a,he as b,me as c,le as d,pe as e,Ce as f,W as g,Ie as h,Le as i,Me as j,V as k,Ne as l,be as m,Ae as n,ue as o,de as p,ge as q,ve as r,$e as s,Te as t,Se as u,we as v,ce as w,Z as x,G as y};
