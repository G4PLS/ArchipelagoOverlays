import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as z,b as D,l as R,c as $,d as j,k as G,m as W,n as Y,o as J,D as K,A as T,g as E,p as h,q as c,s as g,r as d,t as Q,u as X,v as Z,w as ee,S as _,x as te,y as ne,z as ae,B as ie}from"./font-CNtGzVmX.js";import{l as se,g as le,a as oe}from"./media--Xp9gBCU.js";const L=document.createElement("template");L.innerHTML=`
<details class="collapsible-input__collapsible border-radius">
    <summary>
        <input class="collapsible-input__main border-radius" type="text">
        <button class="collapsible-input__add border-radius" type="button">+</button>
    </summary>

    <ul class="collapsible-input__list"></ul>
</details>
`;const w=document.createElement("template");w.innerHTML=`
<li class="collapsible-input__list-element">
    <input class="border-radius" type="text">
    <button class="border-radius"><img src="/ArchipelagoOverlays/assets/images/trash.svg"></button>
</li>
`;class re extends HTMLElement{details;mainInput;addButton;list;constructor(){super();const e=L.content.cloneNode(!0);this.appendChild(e),this.details=this.querySelector("details"),this.mainInput=this.querySelector(".collapsible-input__main"),this.addButton=this.querySelector(".collapsible-input__add"),this.list=this.querySelector(".collapsible-input__list"),this.addButton.addEventListener("click",()=>this.addCurrentToList()),this.mainInput.addEventListener("keypress",n=>{n.key==="Enter"&&this.addCurrentToList()}),this.mainInput.placeholder=this.getAttribute("placeholder")||""}addCurrentToList(){const e=this.mainInput.value;e===""||e===null||this.createNewListEntry(e)}createNewListEntry(e){const a=w.content.cloneNode(!0).querySelector("li"),i=a.querySelector("input"),s=a.querySelector("button");i.value=e,this.mainInput.value="",s.addEventListener("click",()=>{a.remove(),this.dispatchListChange()}),this.list.appendChild(a),this.dispatchListChange()}dispatchListChange(){this.dispatchEvent(new CustomEvent("list-change",{detail:this.getCurrent(),bubbles:!0,composed:!0}))}setCurrent(e){this.list.innerHTML="",e.forEach(n=>{n.trim()!==""&&this.createNewListEntry(n)})}getCurrent(){return Array.from(this.list.querySelectorAll("input")).map(e=>e.value.trim()).filter(e=>e.length>0)}}customElements.define("collapsible-input-list",re);const x=document.createElement("template");x.innerHTML=`
<div class="multi-select__display"></div>
<div class="multi-select__options"></div>
`;const q=document.createElement("template");q.innerHTML=`
<div class="multi-select__option"></div>
`;class ce extends HTMLElement{display;optionsContainer;selectedValues=new Set;options=[];constructor(){super(),this.tabIndex=0;const e=x.content.cloneNode(!0);this.appendChild(e),this.display=this.querySelector(".multi-select__display"),this.optionsContainer=this.querySelector(".multi-select__options"),this.display.addEventListener("click",n=>{n.stopPropagation(),this.optionsContainer.style.display=this.optionsContainer.style.display==="flex"?"none":"flex"}),document.addEventListener("click",()=>{this.optionsContainer.style.display="none"}),this.updateDisplayPlaceholder()}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("change",{detail:this.getSelected(),bubbles:!0,composed:!0}))}updateDisplayPlaceholder(){this.display.childElementCount===0?this.display.setAttribute("data-placeholder",this.getAttribute("placeholder")||"Select..."):this.display.removeAttribute("data-placeholder")}setOptions(e,n){this.options=e,this.selectedValues.clear(),this.optionsContainer.innerHTML="",this.display.innerHTML="",e.forEach((a,i)=>{a.value===void 0&&(a.value=a.label);const o=q.content.cloneNode(!0).querySelector("div");if(o.textContent=a.label,o.dataset.value=a.value,o.dataset.index=i.toString(),o.addEventListener("click",r=>{r.stopPropagation(),this.addItem(o)}),this.optionsContainer.appendChild(o),n&&n.includes(a.value)){const r=this.optionsContainer.querySelector(`[data-value=${a.value}]`);r&&this.addItem(r)}}),this.updateDisplayPlaceholder()}addItem(e){const n=e.dataset.value;if(this.selectedValues.has(n))return;this.selectedValues.add(n),e.remove();const a=document.createElement("div");a.textContent=e.textContent,a.dataset.value=n,a.dataset.index=e.dataset.index,a.className="multi-select__selected-item",a.addEventListener("click",i=>{i.stopPropagation(),this.removeItem(a)}),this.display.appendChild(a),this.updateDisplayPlaceholder(),this.dispatchChangeEvent()}removeItem(e){const n=e.dataset.value;this.selectedValues.delete(n),e.remove();const a=document.createElement("div");a.textContent=e.textContent,a.dataset.value=n,a.dataset.index=e.dataset.index,a.className="multi-select__option",a.addEventListener("click",r=>{r.stopPropagation(),this.addItem(a)});const i=parseInt(a.dataset.index),o=Array.from(this.optionsContainer.children).find(r=>parseInt(r.dataset.index)>i);o?this.optionsContainer.insertBefore(a,o):this.optionsContainer.appendChild(a),this.updateDisplayPlaceholder(),this.dispatchChangeEvent()}getSelected(){return Array.from(this.selectedValues)}}customElements.define("multi-select",ce);const A=document.createElement("template");A.innerHTML=`
<div class="tab-group__tabs">

</div>

<div class="tab-group__content">

</div>
`;const y=document.createElement("template");y.innerHTML=`
<div class="tab">
    <button class="tab__button">item</button>
</div>
`;class ue extends HTMLElement{tabContainer;contentContainer;tabs;currentTab;constructor(){super();const e=Array.from(this.children),n=A.content.cloneNode(!0);this.appendChild(n),this.tabContainer=this.querySelector(".tab-group__tabs"),this.contentContainer=this.querySelector(".tab-group__content"),e.forEach(a=>this.contentContainer.appendChild(a))}dispatchTabChange(){this.dispatchEvent(new CustomEvent("tab-change",{detail:this.currentTab,bubbles:!0,composed:!0}))}rerender(){this.tabContainer.innerHTML="",this.tabs.forEach((e,n)=>{e.value===void 0&&(e.value=e.label);const i=y.content.cloneNode(!0).querySelector(".tab__button");i.value=e.value,i.textContent=e.label,n===0&&(i.classList.add("active"),this.currentTab=e,this.dispatchTabChange()),i.addEventListener("click",()=>{if(this.currentTab){const s=this.tabContainer.querySelector(`.tab__button[value=${this.currentTab.value}]`);if(s.value===i.value)return;s.classList.remove("active")}i.classList.add("active"),this.currentTab={value:i.value??i.textContent,label:i.textContent},this.dispatchTabChange()}),this.tabContainer.appendChild(i.parentElement)})}setTabs(e){this.tabContainer.innerHTML="",this.tabs=e,e.forEach((n,a)=>{n.value===void 0&&(n.value=n.label);const s=y.content.cloneNode(!0).querySelector(".tab__button");s.value=n.value,s.textContent=n.label,a===0&&(s.classList.add("active"),this.currentTab=n,this.dispatchTabChange()),s.addEventListener("click",()=>{if(this.currentTab){const o=this.tabContainer.querySelector(`.tab__button[value=${this.currentTab.value}]`);if(o.value===s.value)return;o.classList.remove("active")}s.classList.add("active"),this.currentTab={value:s.value??s.textContent,label:s.textContent},this.dispatchTabChange()}),this.tabContainer.appendChild(s.parentElement)})}getCurrentTab(){return this.currentTab}}customElements.define("tab-group",ue);class O{element;constructor(e){this.element=e}}class p extends O{initialValue;placeholder;onChange;constructor(e,n,a,i){super(e),this.initialValue=n,this.placeholder=a,this.onChange=i,this.initialize(),this.bindEvents()}bindEvents(){this.element.addEventListener("input",()=>{this.triggerChange()})}initialize(){this.element.value=this.initialValue,this.element.placeholder=this.placeholder}triggerChange(){this.onChange&&this.onChange(this.element.value,this.element)}setValue(e){this.element.value=e}setPlaceholder(e){this.placeholder=e,this.element.placeholder=e}setOnChange(e){this.onChange=e}getValue(){return this.element.value}}class m extends O{options;initialOption;placeholder;onChange;constructor(e,n,a,i,s){super(e),this.options=n,this.initialOption=a,this.placeholder=i,this.onChange=s,this.initialize(),this.bindEvents()}bindEvents(){this.element.addEventListener("change",()=>{this.triggerChange()})}initialize(){if(this.element.innerHTML="",this.options&&this.options.forEach(e=>{const n=this.createOptionElement(e);this.element.add(n)}),this.placeholder){const e=this.createPlaceholderElement(this.placeholder);this.element.prepend(e)}this.initialOption&&(this.element.value=this.initialOption)}triggerChange(){this.onChange&&this.onChange(this.element.value,this.element)}createOptionElement(e){const n=document.createElement("option");return n.value=e.value,n.textContent=e.text,n}createPlaceholderElement(e){const n=document.createElement("option");return n.value="",n.disabled=!0,n.textContent=e.text,n.hidden=e.hidden||!1,n}setOptions(e,n){this.options=e,this.initialOption=n,this.initialize()}addOption(e,n,a){this.options||(this.options=[]);const i=this.createOptionElement(e);n>=0&&n<this.options.length?(this.element.add(i,n),this.options.splice(n,0,e)):(this.element.add(i),this.options.push(e)),a&&(this.element.value=e.value,this.triggerChange())}removeOption(e){if(!this.options)return;this.options=this.options.filter(a=>a.value!==e);const n=this.element.querySelector(`option[value="${e}"]`);n&&n.remove()}getValue(){return this.element.value}}z();D();R();await se("/ArchipelagoOverlays/assets/alert/media.json");await $("/ArchipelagoOverlays/assets/alert/animations.json");await j("/ArchipelagoOverlays/assets/alert/alerts.json");const I=G(),P=Q(),de=`${window.location.origin}/ArchipelagoOverlays/`,N=Object.entries(W()).map(t=>({text:t[1],value:t[0]})),V=Object.entries(Y()).map(t=>({text:t[1],value:t[0]})),M=Object.entries(J()).map(t=>({text:t[1],value:t[0]})),k=["linear","ease-in-out","ease-in","ease-out"];let l=null;const v=new K(document.querySelector(".alert"));v.push(new T("",E("load")));const U=new m(document.querySelector("#alert-preview__select"),void 0,void 0,void 0,void 0),he=document.querySelector("#alert-preview__play"),pe=document.querySelector("#alert-preview__stop");he.addEventListener("click",()=>{const t=U.getValue(),e=E(t);e&&(v.cancel(),v.push(new T("SLOT",e,{slot:"SLOT",countdown:"COUNTDOWN",game:"GAME",hint:"HINT",item:"ITEM",player:"PLAYER",reason:"REASON",sender:"SENDER",target:"TARGET",location:"LOCATION"})))});pe.addEventListener("click",()=>{v.cancel()});const H=new p(document.querySelector("#ap-url-input"),h().url,"archipelago.gg:47375",void 0),f=document.querySelector("#ap-slot-input");f.setCurrent(h().slots);const B=new p(document.querySelector("#ap-password-input"),h().password,"Password...",void 0),me=new m(document.querySelector("#font-family-select"),N,c().family,{text:"Select Font",hidden:!0},(t,e)=>{g({family:t})}),ve=new m(document.querySelector("#font-style-select"),V,c().style,{text:"Select Font Style",hidden:!0},(t,e)=>{g({style:t})}),be=new p(document.querySelector("#font-size-input"),c().size,"Font Size",(t,e)=>{g({size:t})}),ge=new m(document.querySelector("#font-shadow-select"),M,c().shadow,{text:"Select Font Shadow",hidden:!0},(t,e)=>{g({shadow:t})}),ye=new p(document.querySelector("#alert-timeout-input"),void 0,void 0,(t,e)=>{d(l.name,{timeout:Number(t)})}),C=document.querySelector("#alert-image-multi-select");C.addEventListener("change",t=>{l&&d(l.name,{imageReferences:C.getSelected()})});const S=document.querySelector("#alert-audio-multi-select");S.addEventListener("change",t=>{l&&d(l.name,{audioReferences:S.getSelected()})});const Ce=new m(document.querySelector("#alert-animation-select"),P.map(t=>({text:t,value:t})),void 0,{text:"Select Animation",hidden:!0},(t,e)=>{d(l.name,{animation:{reference:t}})}),Se=new p(document.querySelector("#animation-duration-input"),void 0,void 0,(t,e)=>{d(l.name,{animation:{duration:_(t,2500)}})}),Ee=new m(document.querySelector("#animation-timing-select"),k.map(t=>({text:t,value:t})),void 0,{text:"Timing",hidden:!0},(t,e)=>{d(l.name,{animation:{timing:t}})}),fe=new p(document.querySelector("#animation-iteration-input"),void 0,void 0,(t,e)=>{d(l.name,{animation:{iterations:_(t,1)}})}),b=document.querySelector("tab-group");b.addEventListener("tab-change",t=>{const n=b.getCurrentTab().value;l=E(n),ye.setValue(l.timeout.toString()),C.setOptions(le().map(a=>({label:a})),l.imageReferences),S.setOptions(oe().map(a=>({label:a})),l.audioReferences),Ce.setOptions(P.map(a=>({text:a,value:a})),l.animation.reference),Se.setValue(l.animation.duration.toString()),Ee.setOptions(k.map(a=>({text:a,value:a})),l.animation.timing),fe.setValue(l.animation.iterations.toString()),U.setOptions(I.map(a=>({text:a.name,value:a.name})),l.name)});b.setTabs(I.map(t=>({label:t.name})));const u=document.querySelector("#url-parser-input"),Te=document.querySelector("#generate-url-button"),_e=document.querySelector("#load-url-button"),Le=document.querySelector("#copy-url-button"),we=document.querySelector("#open-url-button");function F(){const t=new URL(`${de}alert/`);return te({url:H.getValue(),password:B.getValue(),slots:f.getCurrent()}),ne(t.searchParams),ae(t.searchParams),ie(t.searchParams),t}Te.addEventListener("click",()=>{const t=F();u.value=t.toString()});_e.addEventListener("click",()=>{const e=new URL(u.value).searchParams;X(e),H.setValue(h().url),f.setCurrent(h().slots),B.setValue(h().password),Z(e),me.setOptions(N,c().family),ve.setOptions(V,c().style),be.setValue(c().size),ge.setOptions(M,c().shadow),ee(e),b.rerender()});Le.addEventListener("click",()=>{!u.value||u.value===""||navigator.clipboard.writeText(u.value)});we.addEventListener("click",()=>{let t=u.value;t||(t=F().toString(),u.value=t),window.open(t,"_blank")});
