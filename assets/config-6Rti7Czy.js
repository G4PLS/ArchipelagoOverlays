import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as O,b as x,l as L,c as P,d as F,e as z,j as V,k as _,m as k,n as H,D as N,A as C,g,o as c,s as v,p as o,q as m,r as l,t as U,u as j,v as D,w as I,x as M,y as B,z as R,B as $,E as G,S as b}from"./font-BzVyuUay.js";class J{options;currentChips=[];constructor(e){this.options=e,this.setChips(e.chips),this.bindEvents()}bindEvents(){const e=this.options.input;e.addEventListener("keydown",t=>{t.key==="Enter"&&e.value.trim()!==""&&(t.preventDefault(),this.addChip(e.value.trim()),e.value="")})}createChipElement(e,t){const i=document.createElement("span");return i.className="chip",i.textContent=e,i.dataset.index=t.toString(),i.addEventListener("click",a=>{const r=Number(a.target.dataset.index);this.removeChip(r)}),i}triggerChange(){this.options.onChange&&this.options.onChange(this.currentChips)}addChip(e){if(!this.options.allowDuplicates&&this.currentChips.includes(e))return;this.currentChips.push(e);const t=this.createChipElement(e,this.currentChips.length-1);this.options.container.appendChild(t),this.triggerChange()}removeChip(e){if(e<0||e>=this.currentChips.length)return;this.currentChips.splice(e,1);const t=this.options.container,i=t.querySelector(`.chip[data-index="${e}"]`);i&&t.removeChild(i),Array.from(t.children).forEach((a,r)=>{a.dataset.index=r.toString()}),this.triggerChange()}clear(){this.currentChips=[],this.options.container.innerHTML="",this.triggerChange()}setChips(e){this.currentChips=[],this.options.container.innerHTML="";for(const t of e)this.addChip(t)}}class S{element;constructor(e){this.element=e}}class h extends S{initialValue;placeholder;onChange;constructor(e,t,i,a){super(e),this.initialValue=t,this.placeholder=i,this.onChange=a,this.initialize(),this.bindEvents()}bindEvents(){this.element.addEventListener("input",()=>{this.triggerChange()})}initialize(){this.element.value=this.initialValue,this.element.placeholder=this.placeholder}triggerChange(){this.onChange&&this.onChange(this.element.value,this.element)}setValue(e){this.element.value=e}setPlaceholder(e){this.placeholder=e,this.element.placeholder=e}setOnChange(e){this.onChange=e}}class u extends S{options;initialOption;placeholder;onChange;constructor(e,t,i,a,r){super(e),this.options=t,this.initialOption=i,this.placeholder=a,this.onChange=r,this.initialize(),this.bindEvents()}bindEvents(){this.element.addEventListener("change",()=>{this.triggerChange()})}initialize(){if(this.element.innerHTML="",this.options&&this.options.forEach(e=>{const t=this.createOptionElement(e);this.element.add(t)}),this.placeholder){const e=this.createPlaceholderElement(this.placeholder);this.element.prepend(e)}this.initialOption&&(this.element.value=this.initialOption)}triggerChange(){this.onChange&&this.onChange(this.element.value,this.element)}createOptionElement(e){const t=document.createElement("option");return t.value=e.value,t.textContent=e.text,t}createPlaceholderElement(e){const t=document.createElement("option");return t.value="",t.disabled=!0,t.textContent=e.text,t.hidden=e.hidden||!1,t}setOptions(e,t){this.options=e,this.initialOption=t,this.initialize()}addOption(e,t,i){this.options||(this.options=[]);const a=this.createOptionElement(e);t>=0&&t<this.options.length?(this.element.add(a,t),this.options.splice(t,0,e)):(this.element.add(a),this.options.push(e)),i&&(this.element.value=e.value,this.triggerChange())}removeOption(e){if(!this.options)return;this.options=this.options.filter(i=>i.value!==e);const t=this.element.querySelector(`option[value="${e}"]`);t&&t.remove()}getValue(){return this.element.value}}class K{options;activeTab;constructor(e){this.options=e,this.activeTab=e.initialTab||e.tabs[0]||"",this.setTabs(this.options.tabs,this.activeTab)}rerender(){this.render()}render(){const e=this.options.tabContainer;e.innerHTML="";for(const t of this.options.tabs){const i=this.createTab(t,t===this.activeTab);e.appendChild(i)}this.activeTab&&this.activateTab(this.activeTab)}createTab(e,t){const i=document.createElement("button");return i.className="tab",t&&i.classList.add("active"),i.textContent=e,i.dataset.tab=e,i.addEventListener("click",a=>{const r=a.target.dataset.tab;this.activateTab(r)}),i}activateTab(e){const t=this.options.tabContainer.querySelector(`.tab[data-tab="${this.activeTab}"]`),i=this.options.tabContainer.querySelector(`.tab[data-tab="${e}"]`);i&&(t&&t.classList.remove("active"),this.activeTab=e,i.classList.add("active"),this.options.onTabActivated&&this.options.onTabActivated(e,this.options.contentContainer))}setTabs(e,t){this.activeTab=t||e[0]||"",this.render()}}class f{options;currentTags=[];constructor(e){this.options=e,this.setTags(e.tags,e.selectedTags),this.bindEvents()}bindEvents(){const e=this.options.select;e.addEventListener("change",()=>{const t=e.value;t&&this.addTag(t),e.selectedIndex=0})}createTagElement(e){const t=document.createElement("span");return t.className="tag",t.textContent=e,t.dataset.tag=e,t.addEventListener("click",i=>{const a=i.target.dataset.tag;this.removeTag(a)}),t}createOptionsElement(e){const t=document.createElement("option");return t.dataset.tag=e,t.value=e,t.textContent=e,t}createPlaceHolderSelect(){const e=document.createElement("option");return e.textContent="Select a tag",e.disabled=!0,e.selected=!0,e}removeTag(e){const t=this.currentTags.indexOf(e);if(t===-1)return;const i=this.options.tagContainer.querySelector(`.tag[data-tag=${e}]`);i&&i.remove();const a=this.createOptionsElement(e);this.options.select.appendChild(a),this.currentTags.splice(t,1),this.triggerChange()}addTag(e){if(this.currentTags.includes(e))return;const t=this.createTagElement(e);this.options.tagContainer.appendChild(t);const i=this.options.select.querySelector(`option[data-tag="${e}"]`);i&&i.remove(),this.currentTags.push(e),this.triggerChange()}triggerChange(){this.options.onChange&&this.options.onChange(this.currentTags)}setTags(e,t){this.currentTags=[],this.options.tagContainer.innerHTML="",this.options.select.innerHTML="",e&&(this.options.select.appendChild(this.createPlaceHolderSelect()),e.forEach(i=>{if(t.includes(i)){const a=this.createTagElement(i);this.options.tagContainer.appendChild(a),this.currentTags.push(i)}else{const a=this.createOptionsElement(i);this.options.select.appendChild(a)}}),this.triggerChange())}}O();x();L();await P("/ArchipelagoOverlays/assets/alert/media.json");await F("/ArchipelagoOverlays/assets/alert/animations.json");await z("/ArchipelagoOverlays/assets/alert/alerts.json");const T=V(),E=U(),y=Object.entries(_()).map(n=>({text:n[1],value:n[0]})),w=Object.entries(k()).map(n=>({text:n[1],value:n[0]})),q=Object.entries(H()).map(n=>({text:n[1],value:n[0]})),A=["linear","ease-in-out","ease-in","ease-out"];let s=null;const p=new N(document.querySelector(".alert-container"));p.push(new C("",g("load")));const Q=new h(document.querySelector("#archipelago-url-input"),c().url,"archipelago.gg:47375",(n,e)=>{v({url:n})}),W=new J({container:document.querySelector("#archipelago-slot-chips-container"),input:document.querySelector("#archipelago-slot-input"),chips:c().slots,allowDuplicates:!1,onChange:n=>{v({slots:n})}}),X=new h(document.querySelector("#archipelago-password-input"),c().password,"Password",(n,e)=>{v({password:n})}),Y=new u(document.querySelector("#font-family-select"),y,o().family,{text:"Select Font",hidden:!0},(n,e)=>{m({family:n})}),Z=new u(document.querySelector("#font-style-select"),w,o().style,{text:"Select Font Style",hidden:!0},(n,e)=>{m({style:n})}),ee=new h(document.querySelector("#font-size-input"),o().size,"Font Size",(n,e)=>{m({size:n})}),te=new u(document.querySelector("#font-shadow-select"),q,o().shadow,{text:"Select Font Shadow",hidden:!0},(n,e)=>{m({shadow:n})}),ne=new h(document.querySelector("#alert-timeout-input"),void 0,void 0,(n,e)=>{l(s.name,{timeout:Number(n)})}),ie=new f({select:document.querySelector("#alert-image-select"),tagContainer:document.querySelector("#alert-image-select-tag-container"),tags:void 0,selectedTags:void 0,onChange:n=>{l(s.name,{imageReferences:n})}}),ae=new f({select:document.querySelector("#alert-audio-select"),tagContainer:document.querySelector("#alert-audio-select-tag-container"),tags:void 0,selectedTags:void 0,onChange:n=>{l(s.name,{audioReferences:n})}}),se=new u(document.querySelector("#alert-animation-select"),E.map(n=>({text:n,value:n})),void 0,{text:"Select Animation",hidden:!0},(n,e)=>{l(s.name,{animation:{reference:n}})}),oe=new h(document.querySelector("#alert-animation-duration-input"),void 0,void 0,(n,e)=>{l(s.name,{animation:{duration:b(n,2500)}})}),re=new u(document.querySelector("#alert-animation-timing"),A.map(n=>({text:n,value:n})),void 0,{text:"Timing",hidden:!0},(n,e)=>{l(s.name,{animation:{timing:n}})}),le=new h(document.querySelector("#alert-animation-iterations"),void 0,void 0,(n,e)=>{l(s.name,{animation:{iterations:b(n,1)}})}),ce=new K({contentContainer:document.querySelector("#alert-tab-content-container"),tabContainer:document.querySelector("#alert-tabs-container"),tabs:T.map(n=>n.name),initialTab:"",onTabActivated:(n,e)=>{s=g(n),ne.setValue(s.timeout.toString()),ie.setTags(j(),s.imageReferences||[]),ae.setTags(D(),s.audioReferences||[]),se.setOptions(E.map(t=>({text:t,value:t})),s.animation.reference),oe.setValue(s.animation.duration.toString()),re.setOptions(A.map(t=>({text:t,value:t})),s.animation.timing),le.setValue(s.animation.iterations.toString())}}),he=new u(document.querySelector("#alert-preview-alert-select"),T.map(n=>({text:n.name,value:n.name})),void 0,void 0,void 0),ue=document.querySelector("#play-preview");ue.addEventListener("click",()=>{const n=he.getValue(),e=g(n);e&&(p.cancel(),p.push(new C("SLOT",e)))});const de=document.querySelector("#stop-preview");de.addEventListener("click",()=>{p.cancel()});const d=document.querySelector("#url-input"),pe=document.querySelector("#generate-url");pe.addEventListener("click",()=>{const n=new URLSearchParams;I(n),M(n),B(n),d.value=n.toString()});const me=document.querySelector("#load-url-button");me.addEventListener("click",()=>{const n=new URLSearchParams(d.value);R(n),Q.setValue(c().url),W.setChips(c().slots),X.setValue(c().password),$(n),Y.setOptions(y,o().family),Z.setOptions(w,o().style),ee.setValue(o().size),te.setOptions(q,o().shadow),G(n),ce.rerender()});const ge=document.querySelector("#copy-button");ge.addEventListener("click",()=>{!d.value||d.value===""||navigator.clipboard.writeText(d.value)});
