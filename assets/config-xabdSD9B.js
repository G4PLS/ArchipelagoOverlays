import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as z,b as B,l as D,c as R,d as $,e as j,m as G,n as J,o as W,p as Y,D as K,A as f,g as E,q as d,r as c,s as g,t as u,u as Q,v as X,w as Z,x as ee,y as te,z as ne,B as ae,E as ie,F as se,J as le,S as _}from"./font-ChhDdG-0.js";const L=document.createElement("template");L.innerHTML=`
<details class="collapsible-input__collapsible border-radius">
    <summary>
        <input class="collapsible-input__main border-radius" type="text">
        <button class="collapsible-input__add border-radius" type="button">+</button>
    </summary>

    <ul class="collapsible-input__list"></ul>
</details>
`;const w=document.createElement("template");w.innerHTML=`
<li class="collapsible-input__list-element">
    <input class="border-radius" type="text">
    <button class="border-radius"><img src="/ArchipelagoOverlays/assets/images/trash.svg"></button>
</li>
`;class oe extends HTMLElement{details;mainInput;addButton;list;constructor(){super();const e=L.content.cloneNode(!0);this.appendChild(e),this.details=this.querySelector("details"),this.mainInput=this.querySelector(".collapsible-input__main"),this.addButton=this.querySelector(".collapsible-input__add"),this.list=this.querySelector(".collapsible-input__list"),this.addButton.addEventListener("click",()=>this.addCurrentToList()),this.mainInput.addEventListener("keypress",t=>{t.key==="Enter"&&this.addCurrentToList()}),this.mainInput.placeholder=this.getAttribute("placeholder")||""}addCurrentToList(){const e=this.mainInput.value;e===""||e===null||this.createNewListEntry(e)}createNewListEntry(e){const n=w.content.cloneNode(!0).querySelector("li"),i=n.querySelector("input"),s=n.querySelector("button");i.value=e,this.mainInput.value="",s.addEventListener("click",()=>{n.remove(),this.dispatchListChange()}),this.list.appendChild(n),this.dispatchListChange()}dispatchListChange(){this.dispatchEvent(new CustomEvent("list-change",{detail:this.getCurrent(),bubbles:!0,composed:!0}))}setCurrent(e){this.list.innerHTML="",e.forEach(t=>{t.trim()!==""&&this.createNewListEntry(t)})}getCurrent(){return Array.from(this.list.querySelectorAll("input")).map(e=>e.value.trim()).filter(e=>e.length>0)}}customElements.define("collapsible-input-list",oe);const x=document.createElement("template");x.innerHTML=`
<div class="multi-select__display"></div>
<div class="multi-select__options"></div>
`;const q=document.createElement("template");q.innerHTML=`
<div class="multi-select__option"></div>
`;class re extends HTMLElement{display;optionsContainer;selectedValues=new Set;options=[];constructor(){super(),this.tabIndex=0;const e=x.content.cloneNode(!0);this.appendChild(e),this.display=this.querySelector(".multi-select__display"),this.optionsContainer=this.querySelector(".multi-select__options"),this.display.addEventListener("click",t=>{t.stopPropagation(),this.optionsContainer.style.display=this.optionsContainer.style.display==="flex"?"none":"flex"}),document.addEventListener("click",()=>{this.optionsContainer.style.display="none"}),this.updateDisplayPlaceholder()}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("change",{detail:this.getSelected(),bubbles:!0,composed:!0}))}updateDisplayPlaceholder(){this.display.childElementCount===0?this.display.setAttribute("data-placeholder",this.getAttribute("placeholder")||"Select..."):this.display.removeAttribute("data-placeholder")}setOptions(e,t){this.options=e,this.selectedValues.clear(),this.optionsContainer.innerHTML="",this.display.innerHTML="",e.forEach((n,i)=>{n.value===void 0&&(n.value=n.label);const o=q.content.cloneNode(!0).querySelector("div");if(o.textContent=n.label,o.dataset.value=n.value,o.dataset.index=i.toString(),o.addEventListener("click",r=>{r.stopPropagation(),this.addItem(o)}),this.optionsContainer.appendChild(o),t&&t.includes(n.value)){const r=this.optionsContainer.querySelector(`[data-value=${n.value}]`);r&&this.addItem(r)}}),this.updateDisplayPlaceholder()}addItem(e){const t=e.dataset.value;if(this.selectedValues.has(t))return;this.selectedValues.add(t),e.remove();const n=document.createElement("div");n.textContent=e.textContent,n.dataset.value=t,n.dataset.index=e.dataset.index,n.className="multi-select__selected-item",n.addEventListener("click",i=>{i.stopPropagation(),this.removeItem(n)}),this.display.appendChild(n),this.updateDisplayPlaceholder(),this.dispatchChangeEvent()}removeItem(e){const t=e.dataset.value;this.selectedValues.delete(t),e.remove();const n=document.createElement("div");n.textContent=e.textContent,n.dataset.value=t,n.dataset.index=e.dataset.index,n.className="multi-select__option",n.addEventListener("click",r=>{r.stopPropagation(),this.addItem(n)});const i=parseInt(n.dataset.index),o=Array.from(this.optionsContainer.children).find(r=>parseInt(r.dataset.index)>i);o?this.optionsContainer.insertBefore(n,o):this.optionsContainer.appendChild(n),this.updateDisplayPlaceholder(),this.dispatchChangeEvent()}getSelected(){return Array.from(this.selectedValues)}}customElements.define("multi-select",re);const A=document.createElement("template");A.innerHTML=`
<div class="tab-group__tabs">

</div>

<div class="tab-group__content">

</div>
`;const y=document.createElement("template");y.innerHTML=`
<div class="tab">
    <button class="tab__button">item</button>
</div>
`;class ce extends HTMLElement{tabContainer;contentContainer;tabs;currentTab;constructor(){super();const e=Array.from(this.children),t=A.content.cloneNode(!0);this.appendChild(t),this.tabContainer=this.querySelector(".tab-group__tabs"),this.contentContainer=this.querySelector(".tab-group__content"),e.forEach(n=>this.contentContainer.appendChild(n))}dispatchTabChange(){this.dispatchEvent(new CustomEvent("tab-change",{detail:this.currentTab,bubbles:!0,composed:!0}))}rerender(){this.tabContainer.innerHTML="",this.tabs.forEach((e,t)=>{e.value===void 0&&(e.value=e.label);const i=y.content.cloneNode(!0).querySelector(".tab__button");i.value=e.value,i.textContent=e.label,t===0&&(i.classList.add("active"),this.currentTab=e,this.dispatchTabChange()),i.addEventListener("click",()=>{if(this.currentTab){const s=this.tabContainer.querySelector(`.tab__button[value=${this.currentTab.value}]`);if(s.value===i.value)return;s.classList.remove("active")}i.classList.add("active"),this.currentTab={value:i.value??i.textContent,label:i.textContent},this.dispatchTabChange()}),this.tabContainer.appendChild(i.parentElement)})}setTabs(e){this.tabContainer.innerHTML="",this.tabs=e,e.forEach((t,n)=>{t.value===void 0&&(t.value=t.label);const s=y.content.cloneNode(!0).querySelector(".tab__button");s.value=t.value,s.textContent=t.label,n===0&&(s.classList.add("active"),this.currentTab=t,this.dispatchTabChange()),s.addEventListener("click",()=>{if(this.currentTab){const o=this.tabContainer.querySelector(`.tab__button[value=${this.currentTab.value}]`);if(o.value===s.value)return;o.classList.remove("active")}s.classList.add("active"),this.currentTab={value:s.value??s.textContent,label:s.textContent},this.dispatchTabChange()}),this.tabContainer.appendChild(s.parentElement)})}getCurrentTab(){return this.currentTab}}customElements.define("tab-group",ce);class O{element;constructor(e){this.element=e}}class h extends O{initialValue;placeholder;onChange;constructor(e,t,n,i){super(e),this.initialValue=t,this.placeholder=n,this.onChange=i,this.initialize(),this.bindEvents()}bindEvents(){this.element.addEventListener("input",()=>{this.triggerChange()})}initialize(){this.element.value=this.initialValue,this.element.placeholder=this.placeholder}triggerChange(){this.onChange&&this.onChange(this.element.value,this.element)}setValue(e){this.element.value=e}setPlaceholder(e){this.placeholder=e,this.element.placeholder=e}setOnChange(e){this.onChange=e}getValue(){return this.element.value}}class p extends O{options;initialOption;placeholder;onChange;constructor(e,t,n,i,s){super(e),this.options=t,this.initialOption=n,this.placeholder=i,this.onChange=s,this.initialize(),this.bindEvents()}bindEvents(){this.element.addEventListener("change",()=>{this.triggerChange()})}initialize(){if(this.element.innerHTML="",this.options&&this.options.forEach(e=>{const t=this.createOptionElement(e);this.element.add(t)}),this.placeholder){const e=this.createPlaceholderElement(this.placeholder);this.element.prepend(e)}this.initialOption&&(this.element.value=this.initialOption)}triggerChange(){this.onChange&&this.onChange(this.element.value,this.element)}createOptionElement(e){const t=document.createElement("option");return t.value=e.value,t.textContent=e.text,t}createPlaceholderElement(e){const t=document.createElement("option");return t.value="",t.disabled=!0,t.textContent=e.text,t.hidden=e.hidden||!1,t}setOptions(e,t){this.options=e,this.initialOption=t,this.initialize()}addOption(e,t,n){this.options||(this.options=[]);const i=this.createOptionElement(e);t>=0&&t<this.options.length?(this.element.add(i,t),this.options.splice(t,0,e)):(this.element.add(i),this.options.push(e)),n&&(this.element.value=e.value,this.triggerChange())}removeOption(e){if(!this.options)return;this.options=this.options.filter(n=>n.value!==e);const t=this.element.querySelector(`option[value="${e}"]`);t&&t.remove()}getValue(){return this.element.value}}z();B();D();await R("/ArchipelagoOverlays/assets/alert/media.json");await $("/ArchipelagoOverlays/assets/alert/animations.json");await j("/ArchipelagoOverlays/assets/alert/alerts.json");const I=G(),P=Q(),ue=`${window.location.origin}/ArchipelagoOverlays/`,N=Object.entries(J()).map(a=>({text:a[1],value:a[0]})),V=Object.entries(W()).map(a=>({text:a[1],value:a[0]})),M=Object.entries(Y()).map(a=>({text:a[1],value:a[0]})),H=["linear","ease-in-out","ease-in","ease-out"];let l=null;const v=new K(document.querySelector(".alert-container"));v.push(new f("",E("load")));const k=new p(document.querySelector("#alert-preview__select"),void 0,void 0,void 0,void 0),de=document.querySelector("#alert-preview__play"),he=document.querySelector("#alert-preview__stop");de.addEventListener("click",()=>{const a=k.getValue(),e=E(a);e&&(v.cancel(),v.push(new f("SLOT",e,{slot:"SLOT",countdown:"COUNTDOWN",game:"GAME",hint:"HINT",item:"ITEM",player:"PLAYER",reason:"REASON",sender:"SENDER",target:"TARGET",location:"LOCATION"})))});he.addEventListener("click",()=>{v.cancel()});const F=new h(document.querySelector("#ap-url-input"),d().url,"archipelago.gg:47375",void 0),T=document.querySelector("#ap-slot-input");T.setCurrent(d().slots);const U=new h(document.querySelector("#ap-password-input"),d().password,"Password...",void 0),pe=new p(document.querySelector("#font-family-select"),N,c().family,{text:"Select Font",hidden:!0},(a,e)=>{g({family:a})}),me=new p(document.querySelector("#font-style-select"),V,c().style,{text:"Select Font Style",hidden:!0},(a,e)=>{g({style:a})}),ve=new h(document.querySelector("#font-size-input"),c().size,"Font Size",(a,e)=>{g({size:a})}),be=new p(document.querySelector("#font-shadow-select"),M,c().shadow,{text:"Select Font Shadow",hidden:!0},(a,e)=>{g({shadow:a})}),ge=new h(document.querySelector("#alert-timeout-input"),void 0,void 0,(a,e)=>{u(l.name,{timeout:Number(a)})}),C=document.querySelector("#alert-image-multi-select");C.addEventListener("change",a=>{l&&u(l.name,{imageReferences:C.getSelected()})});const S=document.querySelector("#alert-audio-multi-select");S.addEventListener("change",a=>{l&&u(l.name,{audioReferences:S.getSelected()})});const ye=new p(document.querySelector("#alert-animation-select"),P.map(a=>({text:a,value:a})),void 0,{text:"Select Animation",hidden:!0},(a,e)=>{u(l.name,{animation:{reference:a}})}),Ce=new h(document.querySelector("#animation-duration-input"),void 0,void 0,(a,e)=>{u(l.name,{animation:{duration:_(a,2500)}})}),Se=new p(document.querySelector("#animation-timing-select"),H.map(a=>({text:a,value:a})),void 0,{text:"Timing",hidden:!0},(a,e)=>{u(l.name,{animation:{timing:a}})}),Ee=new h(document.querySelector("#animation-iteration-input"),void 0,void 0,(a,e)=>{u(l.name,{animation:{iterations:_(a,1)}})}),b=document.querySelector("tab-group");b.addEventListener("tab-change",a=>{const t=b.getCurrentTab().value;l=E(t),ge.setValue(l.timeout.toString()),C.setOptions(X().map(n=>({label:n})),l.imageReferences),S.setOptions(Z().map(n=>({label:n})),l.audioReferences),ye.setOptions(P.map(n=>({text:n,value:n})),l.animation.reference),Ce.setValue(l.animation.duration.toString()),Se.setOptions(H.map(n=>({text:n,value:n})),l.animation.timing),Ee.setValue(l.animation.iterations.toString()),k.setOptions(I.map(n=>({text:n.name,value:n.name})),l.name)});b.setTabs(I.map(a=>({label:a.name})));const m=document.querySelector("#url-parser-input"),Te=document.querySelector("#generate-url-button"),fe=document.querySelector("#load-url-button"),_e=document.querySelector("#copy-url-button");Te.addEventListener("click",()=>{const a=new URL(`${ue}alert/`);ee({url:F.getValue(),password:U.getValue(),slots:T.getCurrent()}),te(a.searchParams),ne(a.searchParams),ae(a.searchParams),m.value=a.toString()});fe.addEventListener("click",()=>{const e=new URL(m.value).searchParams;ie(e),F.setValue(d().url),T.setCurrent(d().slots),U.setValue(d().password),se(e),pe.setOptions(N,c().family),me.setOptions(V,c().style),ve.setValue(c().size),be.setOptions(M,c().shadow),le(e),b.rerender()});_e.addEventListener("click",()=>{!m.value||m.value===""||navigator.clipboard.writeText(m.value)});
